# AdminPlus 字典项树形结构 - 测试计划

## 测试环境
- 后端框架: Spring Boot + JPA
- 前端框架: Vue 3 + Element Plus
- 数据库: MySQL/PostgreSQL (需要支持 parent_id 字段)

## 前置条件
1. 数据库表 `sys_dict_item` 已添加 `parent_id` 字段
2. 后端服务已启动并编译成功
3. 前端项目已构建并运行

## 功能测试用例

### TC001: 创建顶级字典项
**前置条件**: 已登录系统，进入字典项管理页面

**测试步骤**:
1. 点击"新增字典项"按钮
2. 不选择父节点（留空）
3. 输入字典标签: "省份"
4. 输入字典值: "province"
5. 点击"确定"

**预期结果**:
- 字典项创建成功
- 在树形表格中显示为顶级节点
- 没有父节点标识

**实际结果**: _______________

### TC002: 创建一级子字典项
**前置条件**: 已存在顶级字典项

**测试步骤**:
1. 点击顶级字典项的"新增子项"按钮
2. 验证父节点已自动选中
3. 输入字典标签: "广东省"
4. 输入字典值: "guangdong"
5. 点击"确定"

**预期结果**:
- 字典项创建成功
- 在树形表格中显示为顶级节点的子节点
- 可以展开/折叠父节点查看子项

**实际结果**: _______________

### TC003: 创建多级嵌套字典项
**前置条件**: 已存在一级子字典项

**测试步骤**:
1. 点击一级子字典项的"新增子项"按钮
2. 输入字典标签: "广州市"
3. 输入字典值: "guangzhou"
4. 点击"确定"
5. 重复步骤创建更多层级

**预期结果**:
- 支持多级嵌套（建议测试到 5-10 层）
- 树形结构正确显示层级关系
- 所有节点可以正常展开/折叠

**实际结果**: _______________

### TC004: 编辑字典项修改父节点
**前置条件**: 已存在多个字典项

**测试步骤**:
1. 点击某字典项的"编辑"按钮
2. 在"父节点"选择器中选择另一个节点作为父节点
3. 点击"确定"

**预期结果**:
- 字典项更新成功
- 树形结构中该项移动到新的父节点下
- 原父节点的子项列表中不再显示该项

**实际结果**: _______________

### TC005: 循环引用防护测试 - 自引用
**前置条件**: 已存在字典项 A

**测试步骤**:
1. 点击字典项 A 的"编辑"按钮
2. 在"父节点"选择器中选择字典项 A 本身
3. 点击"确定"

**预期结果**:
- 提示"不能将父节点设置为自己的子节点"
- 字典项未被修改

**实际结果**: _______________

### TC006: 循环引用防护测试 - 间接循环
**前置条件**:
- 字典项 A
- 字典项 B，父节点为 A
- 字典项 C，父节点为 B

**测试步骤**:
1. 点击字典项 A 的"编辑"按钮
2. 在"父节点"选择器中选择字典项 C
3. 点击"确定"

**预期结果**:
- 提示"不能将父节点设置为自己的子节点"
- 字典项 A 未被修改

**实际结果**: _______________

### TC007: 删除字典项
**前置条件**: 已存在字典项

**测试步骤**:
1. 点击某字典项的"删除"按钮
2. 在确认对话框中点击"确定"

**预期结果**:
- 字典项删除成功
- 树形结构中该项消失
- 如果有子节点，子节点的 parentId 仍指向已删除的父节点（注意：这是当前行为，可能需要后续优化）

**实际结果**: _______________

### TC008: 启用/禁用字典项
**前置条件**: 已存在字典项

**测试步骤**:
1. 点击某字典项的"启用"或"禁用"按钮
2. 在确认对话框中点击"确定"

**预期结果**:
- 字典项状态更新成功
- 状态标签正确显示（正常/禁用）
- 树形结构中该项仍可见

**实际结果**: _______________

### TC009: 展开/折叠树形节点
**前置条件**: 已存在多级字典项

**测试步骤**:
1. 点击节点的展开图标
2. 观察子节点是否展开
3. 点击节点的折叠图标
4. 观察子节点是否折叠

**预期结果**:
- 展开/折叠功能正常
- 图标状态正确更新
- 子节点显示/隐藏正确

**实际结果**: _______________

### TC010: 默认展开所有节点
**前置条件**: 已存在多级字典项

**测试步骤**:
1. 刷新页面
2. 观察树形表格

**预期结果**:
- 所有节点默认展开
- 可以看到完整的树形结构

**实际结果**: _______________

### TC011: 父节点选择器功能
**前置条件**: 已存在多级字典项

**测试步骤**:
1. 点击"新增字典项"按钮
2. 点击"父节点"选择器
3. 选择不同层级的节点
4. 点击"清除"按钮清空选择

**预期结果**:
- 父节点选择器显示树形结构
- 可以选择任意节点作为父节点
- 可以清空选择（创建顶级节点）
- 当前编辑节点及其子节点不在选择列表中

**实际结果**: _______________

### TC012: 表单验证
**前置条件**: 已打开新增/编辑对话框

**测试步骤**:
1. 不输入字典标签，直接点击"确定"
2. 输入字典标签，不输入字典值，点击"确定"
3. 输入超过 100 个字符的标签

**预期结果**:
- 显示"请输入字典标签"错误提示
- 显示"请输入字典值"错误提示
- 显示"字典标签长度不能超过100"错误提示

**实际结果**: _______________

### TC013: 排序功能
**前置条件**: 已存在多个同级字典项

**测试步骤**:
1. 创建多个同级字典项，设置不同的排序值
2. 观察树形表格中的显示顺序

**预期结果**:
- 字典项按照排序值升序排列
- 排序值越小越靠前

**实际结果**: _______________

### TC014: 返回按钮功能
**前置条件**: 已进入字典项管理页面

**测试步骤**:
1. 点击"返回"按钮

**预期结果**:
- 返回到字典列表页面

**实际结果**: _______________

## 边界测试用例

### TC015: 选择不存在的父节点
**测试方式**: 通过 API 直接传递不存在的 parentId

**预期结果**:
- 返回错误提示"父节点不存在"

**实际结果**: _______________

### TC016: 选择不属于当前字典的父节点
**测试方式**: 通过 API 直接传递其他字典的 parentId

**预期结果**:
- 返回错误提示"父节点不属于当前字典"

**实际结果**: _______________

### TC017: 创建空标签
**前置条件**: 已打开新增对话框

**测试步骤**:
1. 字典标签留空
2. 点击"确定"

**预期结果**:
- 显示验证错误提示
- 字典项未创建

**实际结果**: _______________

### TC018: 创建空值
**前置条件**: 已打开新增对话框

**测试步骤**:
1. 字典值留空
2. 点击"确定"

**预期结果**:
- 显示验证错误提示
- 字典项未创建

**实际结果**: _______________

## 性能测试用例

### TC019: 大量字典项测试
**测试步骤**:
1. 创建 100+ 个字典项
2. 打开字典项管理页面
3. 观察页面加载速度

**预期结果**:
- 页面加载时间 < 3 秒
- 树形结构渲染正常
- 展开/折叠操作流畅

**实际结果**: _______________

### TC020: 深层嵌套测试
**测试步骤**:
1. 创建 10+ 层嵌套的字典项
2. 打开字典项管理页面
3. 测试���开/折叠操作

**预期结果**:
- 树形结构正确显示
- 展开/折叠操作正常
- 无性能问题

**实际结果**: _______________

## 兼容性测试

### TC021: 浏览器兼容性
**测试环境**: Chrome, Firefox, Safari, Edge

**测试步骤**:
1. 在不同浏览器中打开字典项管理页面
2. 测试所有功能

**预期结果**:
- 所有功能正常工作
- 树形表格显示正确
- 无样式错乱

**实际结果**: _______________

### TC022: 响应式布局测试
**测试环境**: 不同屏幕尺寸（1920x1080, 1366x768, 移动端）

**测试步骤**:
1. 调整浏览器窗口大小
2. 观察页面布局

**预期结果**:
- 页面布局自适应
- 表格可正常滚动
- 对话框正常显示

**实际结果**: _______________

## 安全测试

### TC023: 权限控制测试
**测试步骤**:
1. 使用无权限的用户登录
2. 尝试访问字典项管理页面
3. 尝试执行增删改操作

**预期结果**:
- 无权限用户无法访问或操作
- 返回权限错误提示

**实际结果**: _______________

### TC024: XSS 防护测试
**测试步骤**:
1. 在字典标签中输入 `<script>alert('xss')</script>`
2. 保存并查看

**预期结果**:
- 脚本不执行
- 标签正确显示为文本

**实际结果**: _______________

## 回归测试

### TC025: 原有功能验证
**测试步骤**:
1. 验证字典列表功能
2. 验证字典创建/编辑/删除功能
3. 验证字典项列表功能（非树形）

**预期结果**:
- 所有原有功能正常工作

**实际结果**: _______________

## 测试结果汇总

| 测试用例 | 测试结果 | 备注 |
|---------|---------|------|
| TC001 | ☐ 通过 ☐ 失败 | |
| TC002 | ☐ 通过 ☐ 失败 | |
| TC003 | ☐ 通过 ☐ 失败 | |
| TC004 | ☐ 通过 ☐ 失败 | |
| TC005 | ☐ 通过 ☐ 失败 | |
| TC006 | ☐ 通过 ☐ 失败 | |
| TC007 | ☐ 通过 ☐ 失败 | |
| TC008 | ☐ 通过 ☐ 失败 | |
| TC009 | ☐ 通过 ☐ 失败 | |
| TC010 | ☐ 通过 ☐ 失败 | |
| TC011 | ☐ 通过 ☐ 失败 | |
| TC012 | ☐ 通过 ☐ 失败 | |
| TC013 | ☐ 通过 ☐ 失败 | |
| TC014 | ☐ 通过 ☐ 失败 | |
| TC015 | ☐ 通过 ☐ 失败 | |
| TC016 | ☐ 通过 ☐ 失败 | |
| TC017 | ☐ 通过 ☐ 失败 | |
| TC018 | ☐ 通过 ☐ 失败 | |
| TC019 | ☐ 通过 ☐ 失败 | |
| TC020 | ☐ 通过 ☐ 失败 | |
| TC021 | ☐ 通过 ☐ 失败 | |
| TC022 | ☐ 通过 ☐ 失败 | |
| TC023 | ☐ 通过 ☐ 失败 | |
| TC024 | ☐ 通过 ☐ 失败 | |
| TC025 | ☐ 通过 ☐ 失败 | |

## 测试总结

**通过率**: ____ / 25 (____%)

**发现的问题**:
1. _______________
2. _______________
3. _______________

**建议改进**:
1. _______________
2. _______________
3. _______________

**测试人员**: _______________
**测试日期**: _______________
**测试环境**: _______________